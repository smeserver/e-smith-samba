diff -Nur -x '*.orig' -x '*.rej' e-smith-samba-1.13.2/root/etc/e-smith/events/actions/user-create-profiledir mezzanine_patched_e-smith-samba-1.13.2/root/etc/e-smith/events/actions/user-create-profiledir
--- e-smith-samba-1.13.2/root/etc/e-smith/events/actions/user-create-profiledir	2005-08-03 07:16:52.000000000 +1000
+++ mezzanine_patched_e-smith-samba-1.13.2/root/etc/e-smith/events/actions/user-create-profiledir	2006-02-18 07:02:22.000000000 +1100
@@ -28,7 +28,7 @@
 
 my $event = $ARGV [0];
 
-my @users = map { $_->key } $adb->users;
+my @users = map ('admin', map { $_->key } $adb->users);
 
 my @newusers = ($event eq "post-upgrade") ? @users : $ARGV[1] ;
 
@@ -39,11 +39,13 @@
 
     my $dir = "/home/e-smith/files/samba/profiles/$user";
    
-    next if ( -d $dir );
+    my $pre_existing = ( -d $dir );
  
-    mkdir $dir, 0700 || die "Couldn't create directory $dir\n";
+    $pre_existing || mkdir $dir, 700 || die "Couldn't create directory $dir\n";
 
     chmod 0700, $dir;	# Remove setgid bit
+    
+    next if $pre_existing;
 
     esmith::util::chownFile($user, $user, $dir) || 
         die "Couldn't change ownership of $dir\n";
